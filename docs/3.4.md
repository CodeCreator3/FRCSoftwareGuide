# 3.4 Closed Loop
There is an important engineering concept we must understand before diving into any subsystem  
The Closed Loop Feedback Control System (or Feedback Loop)  
This is also known as a PID (Proportional Integral Derivative) Loop  
On the next slide is a clip from a Mark Rober video that demonstrates how humans do this  
https://www.youtube.com/watch?v=LEZCxxKp0hM   
Similar to how Feedback loops power drones, robot dogs, and jets, they are critical to FRC Robots  
In fact, feedback loops control the motion of elevators, arms, drivetrains, and most other subsystems  
One distinctive factor between a great team and good team is how quickly and smoothly they can control the motion of their robot  
Watch this video of 1690 Orbit’s 2025 autonomous   
Focus on how smoothly their mechanisms move  
https://www.youtube.com/shorts/p8AGxqX46m8   
The big question is how do they work  
At the end of the day, your mechanism is at point A and you want it to be at point B in the least amount of time (this is different for velocity control, we’ll get into that)
The problem that control loops solve is knowing what to tell the motor based on the position of the mechanism  
Take an elevator for example  
The Height is 0 inches  
You want it to be at 40 inches  
One approach would be to just give the motor positive voltage  
However, eventually the elevator would keep going past the desired position  
Another approach would be to give it positive voltage until it reaches the desired pos  
However, in the real world, mechanisms can’t go from some velocity to zero in no time  
This means we would still overshoot  
The real solution is to send voltage to the motor based on the difference between desired and current position (in this case 20)  
However, 20 volts exceeds the max of 12 in FRC  
So we add a scaling factor called ‘P’ that we multiply by the 20  
Lets say P is 0.5  
Now at the bottom, we are giving 10 volts to the motor: (20-0)*0.5  
Half way up, we give the motor 5 volts (20-10)*0.5  
And when we are one inch away, we give the motor 0.5 volts (20-19)*0.5  
This reduces the chance of overshooting dramatically  
However, overshooting is still a risk  
The idea behind a PID is that you put in a bogus value for P (usually really low like 0.01)  
You observe how quickly the mechanism reaches its goal (usually pretty slowly at first)  
You increase or decrease P until you get a smooth motion  
‘I’ and ‘D’ are also numbers you can play with for smooth motion  
They involve some calculus that you don’t need to understand to tune a PID  
Usually, my team doesn’t touch I, and we only use D when we are trying to prevent overshoot  
Do what works for your robot  
The reality is PIDs are a little more complicated than what we’ve discussed  
Gravity is also a factor  
This means that the elevator carriage will get to a point where the motor output is equal to gravity and it will be below its desired position  
In this case, we often add a constant fudge factor (also known as a feed forward) to our final voltage so that the elevator is always counteracting gravity  
You can imagine that this same concept can apply to the angle of an arm  
When we talk about velocity, there’s a current velocity and a target velocity. It’s similar, but different math applies.  
Thankfully, the math for PIDs is usually done for us by the motors (or motor controllers) themselves.  
We just need to set the P, I, and D values  
More info on PIDs: https://docs.wpilib.org/en/stable/docs/software/advanced-controls/introduction/introduction-to-pid.html   